<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>MSCL Quick Start Guide</title>

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
      <script src="javascripts/all.js" type="text/javascript"></script>

      <script>
        $(function() {
          setupLanguages(["cpp","csharp","python"]);
        });
      </script>
  </head>

  <body class="index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="cpp">C++</a>
              <a href="#" data-language-name="csharp">C#</a>
              <a href="#" data-language-name="python">Python</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='http://www.microstrain.com/'>microstrain.com</a></li>
            <li><a href='http://www.sensorcloud.com/'>sensorcloud.com</a></li>
            <li><a href='http://www.lord.com/'>lord.com</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>
<pre><code class="highlight cpp"><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Sensing is Fun!"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

<span class="c1">//you can get the version of MSCL like this
</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">mscl</span><span class="o">::</span><span class="n">Version</span><span class="o">::</span><span class="n">asString</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</code></pre>
<pre><code class="highlight csharp"><span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Sensing is Fun!"</span><span class="p">);</span>

<span class="c1">//you can get the version of MSCL like this
</span><span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">mscl</span><span class="p">.</span><span class="n">Version</span><span class="p">.</span><span class="nf">asString</span><span class="p">());</span>
</code></pre>
<pre><code class="highlight python"><span class="k">print</span> <span class="s">"Sensing is Fun!"</span>

<span class="c"># you can get the version of MSCL like this</span>
<span class="k">print</span> <span class="n">mscl</span><span class="o">.</span><span class="n">Version</span><span class="o">.</span><span class="n">asString</span><span class="p">()</span>
</code></pre>

<p>Welcome to the MSCL (MicroStrain Communication Library) Quick Start Guide! </p>

<p>You can use MSCL to interact with wireless and wired sensors developed by <a href="http://www.microstrain.com/">LORD MicroStrain Sensing Systems</a>.</p>

<p>MSCL has language bindings in C++, .NET (C#, VB, LabView, MATLAB), and Python! You can view code examples in the area to the right, and you can switch the programming language of the examples with the tabs in the top right.</p>

<p>This guide will help get you started with using MSCL. It does not encompass everything that MSCL can do. Please see the complete API Documentation for a list of all functionality.</p>

<aside class="notice">
For simplicity, the examples below do not show the necessary error handling that should be performed when using MSCL. Please see the API Documentation for details on Exceptions that each function can throw.
</aside>

<h1 id="wireless">Wireless</h1>

<h2 id="creating-a-basestation">Creating a BaseStation</h2>
<pre><code class="highlight cpp"><span class="cp">#include "mscl/Communication/Connection.h"
#include "mscl/MicroStrain/Wireless/BaseStation.h"
</span>
<span class="c1">//create the connection object with port and baud rate
</span><span class="n">mscl</span><span class="o">::</span><span class="n">Connection</span><span class="o">::</span><span class="n">Serial</span> <span class="n">connection</span><span class="p">(</span><span class="s">"COM3"</span><span class="p">,</span> <span class="mi">921600</span><span class="p">);</span>

<span class="c1">//create the BaseStation, passing in the connection
</span><span class="n">mscl</span><span class="o">::</span><span class="n">BaseStation</span> <span class="n">basestation</span><span class="p">(</span><span class="n">connection</span><span class="p">);</span>
</code></pre>
<pre><code class="highlight csharp"><span class="c1">//create the connection object with port and baud rate
</span><span class="n">mscl</span><span class="p">.</span><span class="n">Connection</span> <span class="n">connection</span> <span class="p">=</span> <span class="n">mscl</span><span class="p">.</span><span class="n">Connection</span><span class="p">.</span><span class="nf">Serial</span><span class="p">(</span><span class="s">"COM3"</span><span class="p">,</span> <span class="m">921600</span><span class="p">);</span>

<span class="c1">//create the BaseStation, passing in the connection
</span><span class="n">mscl</span><span class="p">.</span><span class="n">BaseStation</span> <span class="n">basestation</span> <span class="p">=</span> <span class="k">new</span> <span class="n">mscl</span><span class="p">.</span><span class="nf">BaseStation</span><span class="p">(</span><span class="n">connection</span><span class="p">);</span>
</code></pre>
<pre><code class="highlight python"><span class="kn">import</span> <span class="nn">mscl</span>

<span class="c">#create the connection object with port and baud rate</span>
<span class="n">connection</span> <span class="o">=</span> <span class="n">mscl</span><span class="o">.</span><span class="n">Connection</span><span class="o">.</span><span class="n">Serial</span><span class="p">(</span><span class="s">"COM3"</span><span class="p">,</span> <span class="mi">921600</span><span class="p">)</span>

<span class="c">#create the BaseStation, passing in the connection</span>
<span class="n">basestation</span> <span class="o">=</span> <span class="n">mscl</span><span class="o">.</span><span class="n">BaseStation</span><span class="p">(</span><span class="n">connection</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>Make sure to replace <code class="prettyprint">COM3</code> and <code class="prettyprint">921600</code> with your own port settings.</p>
</blockquote>

<p>To interace with a wireless device, you will first need to create a <code class="prettyprint">BaseStation</code> that represents a physical <a href="http://www.microstrain.com/wireless/gateways">BaseStation or Gateway</a>.</p>

<p>A <code class="prettyprint">BaseStation</code> takes a <code class="prettyprint">Connection</code> as a parameter. </p>

<p><code class="prettyprint">Serial</code>, <code class="prettyprint">TcpIp</code>, and <code class="prettyprint">UnixSocket</code> are all available as connection types.</p>

<aside class="notice">
As soon as the Connection object is created, the port will be opened.
</aside>

<h2 id="creating-a-wirelessnode">Creating a WirelessNode</h2>
<pre><code class="highlight cpp"><span class="cp">#include "mscl/MicroStrain/Wireless/WirelessNode.h"
</span>
<span class="c1">//create a WirelessNode with the BaseStation
</span><span class="n">mscl</span><span class="o">::</span><span class="n">WirelessNode</span> <span class="n">node</span><span class="p">(</span><span class="mi">31849</span><span class="p">,</span> <span class="n">baseStation</span><span class="p">);</span>
</code></pre>
<pre><code class="highlight csharp"><span class="c1">//create a WirelessNode with the BaseStation we created
</span><span class="n">mscl</span><span class="p">.</span><span class="n">WirelessNode</span> <span class="n">node</span> <span class="p">=</span> <span class="k">new</span> <span class="n">mscl</span><span class="p">.</span><span class="nf">WirelessNode</span><span class="p">(</span><span class="m">31849</span><span class="p">,</span> <span class="n">baseStation</span><span class="p">);</span>
</code></pre>
<pre><code class="highlight python"><span class="c"># create a WirelessNode with the BaseStation we created</span>
<span class="n">node</span> <span class="o">=</span> <span class="n">mscl</span><span class="o">.</span><span class="n">WirelessNode</span><span class="p">(</span><span class="mi">31849</span><span class="p">,</span> <span class="n">baseStation</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>Make sure to replace <code class="prettyprint">31849</code> with the Node Address of your Wireless Node.</p>
</blockquote>

<p>To communicate with any <a href="http://www.microstrain.com/wireless/sensors">Wireless Node</a>, create a <code class="prettyprint">WirelessNode</code> instance, providing the Node Address of the physical Node, and the <code class="prettyprint">BaseStation</code> that you wish to communicate to the Node with.</p>

<aside class="notice">
If a Wireless Node is already sampling and all you would like to do is collect data, you don&rsquo;t need to create a WirelessNode object.
See the Collecting Data section for more info.
</aside>

<h2 id="communicating-with-a-node">Communicating with a Node</h2>
<pre><code class="highlight cpp"><span class="c1">//ping the Node
</span><span class="n">mscl</span><span class="o">::</span><span class="n">PingResponse</span> <span class="n">response</span> <span class="o">=</span> <span class="n">node</span><span class="p">.</span><span class="n">ping</span><span class="p">();</span>

<span class="c1">//if the ping response was a success
</span><span class="k">if</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">success</span><span class="p">())</span> 
<span class="p">{</span>
    <span class="n">response</span><span class="p">.</span><span class="n">baseRssi</span><span class="p">();</span> <span class="c1">//the BaseStation RSSI
</span>    <span class="n">response</span><span class="p">.</span><span class="n">nodeRssi</span><span class="p">();</span> <span class="c1">//the Node RSSI
</span><span class="p">}</span>
</code></pre>
<pre><code class="highlight csharp"><span class="c1">//ping the Node
</span><span class="n">mscl</span><span class="p">.</span><span class="n">PingResponse</span> <span class="n">response</span> <span class="p">=</span> <span class="n">node</span><span class="p">.</span><span class="nf">ping</span><span class="p">();</span>

<span class="c1">//if the ping response was a success
</span><span class="k">if</span> <span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="nf">success</span><span class="p">())</span>
<span class="p">{</span>
    <span class="n">response</span><span class="p">.</span><span class="nf">baseRssi</span><span class="p">();</span> <span class="c1">//the BaseStation RSSI
</span>    <span class="n">response</span><span class="p">.</span><span class="nf">nodeRssi</span><span class="p">();</span> <span class="c1">//the Node RSSI
</span><span class="p">}</span>
</code></pre>
<pre><code class="highlight python"><span class="c"># ping the Node</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">ping</span><span class="p">()</span>

<span class="c"># if the ping response was a success</span>
<span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">success</span><span class="p">():</span>
    <span class="n">response</span><span class="o">.</span><span class="n">baseRssi</span><span class="p">()</span> <span class="c"># the BaseStation RSSI</span>
    <span class="n">response</span><span class="o">.</span><span class="n">nodeRssi</span><span class="p">()</span> <span class="c"># the Node RSSI</span>
</code></pre>

<p>A Wireless Node, when powered on, can be in 1 of 3 states:</p>

<table><thead>
<tr>
<th>Node State</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Idle</td>
<td>The Node is awake and waiting for commands.</td>
</tr>
<tr>
<td>Sleep</td>
<td>The Node is in a low power sleep state.</td>
</tr>
<tr>
<td>Sampling</td>
<td>The Node is actively sampling / sending data.</td>
</tr>
</tbody></table>

<p>If a Node is in an Idle state, it will respond to pings, can be configured, and can be put into the other states (sleep or sampling). To test communicating with a WirelessNode that is in an idle state, use the <code class="prettyprint">ping()</code> function.</p>
<pre><code class="highlight cpp"><span class="c1">//call the setToIdle function and get the resulting SetToIdleStatus object
</span><span class="n">mscl</span><span class="o">::</span><span class="n">SetToIdleStatus</span> <span class="n">idleStatus</span> <span class="o">=</span> <span class="n">node</span><span class="p">.</span><span class="n">setToIdle</span><span class="p">();</span>

<span class="c1">// checks if the set to idle operation has completed (successfully or with a failure)
</span><span class="k">while</span><span class="p">(</span><span class="o">!</span><span class="n">idleStatus</span><span class="p">.</span><span class="n">complete</span><span class="p">())</span>
<span class="p">{</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"."</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span><span class="n">userCancels</span><span class="p">)</span>
        <span class="n">idleStatus</span><span class="p">.</span><span class="n">cancel</span><span class="p">();</span>
<span class="p">}</span>

<span class="c1">//check the result of the Set to Idle operation
</span><span class="k">switch</span><span class="p">(</span><span class="n">idleStatus</span><span class="p">.</span><span class="n">result</span><span class="p">())</span>
<span class="p">{</span>
<span class="k">case</span> <span class="n">mscl</span><span class="p">:</span><span class="o">:</span><span class="n">SetToIdleStatus</span><span class="o">::</span><span class="n">setToIdleResult_success</span><span class="o">:</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Node is now in idle mode."</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="k">break</span><span class="p">;</span>

<span class="k">case</span> <span class="n">mscl</span><span class="p">:</span><span class="o">:</span><span class="n">SetToIdleStatus</span><span class="o">::</span><span class="n">setToIdleResult_canceled</span><span class="o">:</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Set to Idle was canceled!"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="k">break</span><span class="p">;</span>

<span class="k">case</span> <span class="n">mscl</span><span class="p">:</span><span class="o">:</span><span class="n">SetToIdleStatus</span><span class="o">::</span><span class="n">setToIdleResult_failed</span><span class="o">:</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Set to Idle has failed!"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="k">break</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<pre><code class="highlight csharp"><span class="c1">//call the setToIdle function and get the resulting SetToIdleStatus object
</span><span class="n">mscl</span><span class="p">.</span><span class="n">SetToIdleStatus</span> <span class="n">idleStatus</span> <span class="p">=</span> <span class="n">node</span><span class="p">.</span><span class="nf">setToIdle</span><span class="p">();</span>

<span class="c1">// checks if the Set to Idle operation has completed (successfully or with a failure)
</span><span class="k">while</span> <span class="p">(!</span><span class="n">idleStatus</span><span class="p">.</span><span class="nf">complete</span><span class="p">())</span>
<span class="p">{</span>
    <span class="n">Console</span><span class="p">.</span><span class="nf">Write</span><span class="p">(</span><span class="s">"."</span><span class="p">);</span>

    <span class="k">if</span><span class="p">(</span><span class="n">userCancels</span><span class="p">)</span>
        <span class="n">idleStatus</span><span class="p">.</span><span class="nf">cancel</span><span class="p">();</span>
<span class="p">}</span>

<span class="c1">//check the result of the Set to Idle operation
</span><span class="k">switch</span> <span class="p">(</span><span class="n">idleStatus</span><span class="p">.</span><span class="nf">result</span><span class="p">())</span>
<span class="p">{</span>
    <span class="k">case</span> <span class="n">mscl</span><span class="p">.</span><span class="n">SetToIdleStatus</span><span class="p">.</span><span class="n">SetToIdleResult</span><span class="p">.</span><span class="n">setToIdleResult_success</span><span class="p">:</span>
        <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Node is now in idle mode."</span><span class="p">);</span>
        <span class="k">break</span><span class="p">;</span>

    <span class="k">case</span> <span class="n">mscl</span><span class="p">.</span><span class="n">SetToIdleStatus</span><span class="p">.</span><span class="n">SetToIdleResult</span><span class="p">.</span><span class="n">setToIdleResult_canceled</span><span class="p">:</span>
        <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Set to Idle was canceled!"</span><span class="p">);</span>
        <span class="k">break</span><span class="p">;</span>

    <span class="k">case</span> <span class="n">mscl</span><span class="p">.</span><span class="n">SetToIdleStatus</span><span class="p">.</span><span class="n">SetToIdleResult</span><span class="p">.</span><span class="n">setToIdleResult_failed</span><span class="p">:</span>
        <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Set to Idle has failed!"</span><span class="p">);</span>
        <span class="k">break</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<pre><code class="highlight python"><span class="c"># call the setToIdle function and get the resulting SetToIdleStatus object</span>
<span class="n">idleStatus</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">setToIdle</span><span class="p">()</span>

<span class="c"># checks if the Set to Idle operation has completed (successfully or with a failure)</span>
<span class="k">while</span> <span class="ow">not</span> <span class="n">idleStatus</span><span class="o">.</span><span class="n">complete</span><span class="p">():</span>
    <span class="k">print</span> <span class="s">"."</span><span class="p">,</span>

    <span class="k">if</span> <span class="n">userCancels</span><span class="p">:</span>
        <span class="n">idleStatus</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span>

<span class="c"># check the result of the Set to Idle operation</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">idleStatus</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>
<span class="k">if</span> <span class="n">result</span> <span class="o">==</span> <span class="n">mscl</span><span class="o">.</span><span class="n">SetToIdleStatus</span><span class="o">.</span><span class="n">setToIdleResult_success</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">"Node is now in idle mode."</span>
<span class="k">elif</span> <span class="n">result</span> <span class="o">==</span> <span class="n">mscl</span><span class="o">.</span><span class="n">SetToIdleStatus</span><span class="o">.</span><span class="n">setToIdleResult_canceled</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">"Set to Idle was canceled!"</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">"Set to Idle has failed!"</span>
</code></pre>

<p>If a Node is in the Sleep state or Sampling state, it cannot be directly communicated with. In order to communicate with the Node, it must be put back into the Idle state. This can be done by using the <code class="prettyprint">setToIdle()</code> function.</p>

<p>The Set to Idle operation uses all of the BaseStation&rsquo;s bandwidth to attempt to stop/wake the Node. Thus, this can only be performed on a single Node at a time. Once started, the operation will continue until canceled by calling the <code class="prettyprint">cancel()</code> function on the <code class="prettyprint">SetToIdleStatus</code> object returned from the <code class="prettyprint">setToIdle()</code> function.</p>

<h2 id="configuring-a-node">Configuring a Node</h2>

<h3 id="getting-current-config">Getting Current Config</h3>
<pre><code class="highlight cpp"><span class="c1">//get the number of datalogging sessions stored on the node
</span><span class="n">node</span><span class="p">.</span><span class="n">getNumDatalogSessions</span><span class="p">();</span>  

<span class="c1">//get the user inactivity timeout in seconds
</span><span class="n">node</span><span class="p">.</span><span class="n">getInactivityTimeout</span><span class="p">();</span>

<span class="c1">//get the ActiveChannels
</span><span class="n">node</span><span class="p">.</span><span class="n">getActiveChannels</span><span class="p">();</span>

<span class="c1">//get the number of sweeps to sample for
</span><span class="n">node</span><span class="p">.</span><span class="n">getNumSweeps</span><span class="p">();</span>

<span class="c1">//verify Thermocouple Type is supported by this Node
</span><span class="k">if</span><span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">features</span><span class="p">().</span><span class="n">supportsThermocoupleType</span><span class="p">())</span>
<span class="p">{</span>
    <span class="c1">//get the thermocouple type
</span>    <span class="n">node</span><span class="p">.</span><span class="n">getThermocoupleType</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>
<pre><code class="highlight csharp"><span class="c1">//get the number of datalogging sessions stored on the node
</span><span class="n">node</span><span class="p">.</span><span class="nf">getNumDatalogSessions</span><span class="p">();</span>  

<span class="c1">//get the user inactivity timeout in seconds
</span><span class="n">node</span><span class="p">.</span><span class="nf">getInactivityTimeout</span><span class="p">();</span>

<span class="c1">//get the ActiveChannels
</span><span class="n">node</span><span class="p">.</span><span class="nf">getActiveChannels</span><span class="p">();</span>

<span class="c1">//get the number of sweeps to sample for
</span><span class="n">node</span><span class="p">.</span><span class="nf">getNumSweeps</span><span class="p">();</span>

<span class="c1">//verify Thermocouple Type is supported by this Node
</span><span class="k">if</span><span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="nf">features</span><span class="p">().</span><span class="nf">supportsThermocoupleType</span><span class="p">())</span>
<span class="p">{</span>
    <span class="c1">//get the thermocouple type
</span>    <span class="n">node</span><span class="p">.</span><span class="nf">getThermocoupleType</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>
<pre><code class="highlight python"><span class="c"># get the number of datalogging sessions stored on the node</span>
<span class="n">node</span><span class="o">.</span><span class="n">getNumDatalogSessions</span><span class="p">()</span>

<span class="c"># get the user inactivity timeout in seconds</span>
<span class="n">node</span><span class="o">.</span><span class="n">getInactivityTimeout</span><span class="p">()</span>

<span class="c"># get the ActiveChannels</span>
<span class="n">node</span><span class="o">.</span><span class="n">getActiveChannels</span><span class="p">()</span>

<span class="c"># get the number of sweeps to sample for</span>
<span class="n">node</span><span class="o">.</span><span class="n">getNumSweeps</span><span class="p">()</span>

<span class="c"># verify Thermocouple Type is supported by this Node</span>
<span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">features</span><span class="p">()</span><span class="o">.</span><span class="n">supportsThermocoupleType</span><span class="p">():</span>
    <span class="c"># get the thermocouple type</span>
    <span class="n">node</span><span class="o">.</span><span class="n">getThermocoupleType</span><span class="p">()</span>
</code></pre>

<p>To get the current configuration settings of a Wireless Node, each setting has an individual function on the <code class="prettyprint">WirelessNode</code> object.</p>

<p>However, not all settings are supported by all Nodes. If a function is called (such as <code class="prettyprint">getThermocoupleType()</code>) on a Node that doesn&rsquo;t support that feature (doesn&rsquo;t support thermocouples), it will throw an <code class="prettyprint">Error_NotSupported</code> exception.</p>

<p>Use the <code class="prettyprint">NodeFeatures</code> class (<code class="prettyprint">node.features()</code>) to check which features are available for the Wireless Node.</p>

<p><br><br><br><br>
<br><br><br><br>
<br><br><br><br>
<br><br></p>

<h3 id="setting-the-config">Setting the Config</h3>
<pre><code class="highlight cpp"><span class="c1">//create a WirelessNodeConfig which is used to set all node configuration options
</span><span class="n">mscl</span><span class="o">::</span><span class="n">WirelessNodeConfig</span> <span class="n">config</span><span class="p">;</span>

<span class="c1">//set the configuration options that we want to change
</span><span class="n">config</span><span class="p">.</span><span class="n">bootMode</span><span class="p">(</span><span class="n">mscl</span><span class="o">::</span><span class="n">WirelessTypes</span><span class="o">::</span><span class="n">bootMode_normal</span><span class="p">);</span>
<span class="n">config</span><span class="p">.</span><span class="n">inactivityTimeout</span><span class="p">(</span><span class="mi">7200</span><span class="p">);</span>
<span class="n">config</span><span class="p">.</span><span class="n">samplingMode</span><span class="p">(</span><span class="n">mscl</span><span class="o">::</span><span class="n">WirelessTypes</span><span class="o">::</span><span class="n">samplingMode_sync</span><span class="p">);</span>
<span class="n">config</span><span class="p">.</span><span class="n">sampleRate</span><span class="p">(</span><span class="n">mscl</span><span class="o">::</span><span class="n">WirelessTypes</span><span class="o">::</span><span class="n">sampleRate_256Hz</span><span class="p">);</span>
<span class="n">config</span><span class="p">.</span><span class="n">unlimitedDuration</span><span class="p">(</span><span class="nb">true</span><span class="p">);</span>

<span class="c1">//apply the configuration to the Node
</span><span class="n">node</span><span class="p">.</span><span class="n">applyConfig</span><span class="p">(</span><span class="n">config</span><span class="p">);</span>
</code></pre>
<pre><code class="highlight csharp"><span class="c1">//create a WirelessNodeConfig which is used to set all node configuration options
</span><span class="n">mscl</span><span class="p">.</span><span class="n">WirelessNodeConfig</span> <span class="n">config</span> <span class="p">=</span> <span class="k">new</span> <span class="n">mscl</span><span class="p">.</span><span class="nf">WirelessNodeConfig</span><span class="p">();</span>

<span class="c1">//set some of the node's configuration options
</span><span class="n">config</span><span class="p">.</span><span class="nf">bootMode</span><span class="p">(</span><span class="n">mscl</span><span class="p">.</span><span class="n">WirelessTypes</span><span class="p">.</span><span class="n">BootMode</span><span class="p">.</span><span class="n">bootMode_normal</span><span class="p">);</span>
<span class="n">config</span><span class="p">.</span><span class="nf">inactivityTimeout</span><span class="p">(</span><span class="m">7200</span><span class="p">);</span>
<span class="n">config</span><span class="p">.</span><span class="nf">samplingMode</span><span class="p">(</span><span class="n">mscl</span><span class="p">.</span><span class="n">WirelessTypes</span><span class="p">.</span><span class="n">SamplingMode</span><span class="p">.</span><span class="n">samplingMode_sync</span><span class="p">);</span>
<span class="n">config</span><span class="p">.</span><span class="nf">sampleRate</span><span class="p">(</span><span class="n">mscl</span><span class="p">.</span><span class="n">WirelessTypes</span><span class="p">.</span><span class="n">WirelessSampleRate</span><span class="p">.</span><span class="n">sampleRate_256Hz</span><span class="p">);</span>
<span class="n">config</span><span class="p">.</span><span class="nf">unlimitedDuration</span><span class="p">(</span><span class="k">true</span><span class="p">);</span>

<span class="c1">//apply the configuration to the Node
</span><span class="n">node</span><span class="p">.</span><span class="nf">applyConfig</span><span class="p">(</span><span class="n">config</span><span class="p">);</span>
</code></pre>
<pre><code class="highlight python"><span class="c"># create a WirelessNodeConfig which is used to set all node configuration options</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">mscl</span><span class="o">.</span><span class="n">WirelessNodeConfig</span><span class="p">()</span>

<span class="c"># set the configuration options that we want to change</span>
<span class="n">config</span><span class="o">.</span><span class="n">bootMode</span><span class="p">(</span><span class="n">mscl</span><span class="o">.</span><span class="n">WirelessTypes</span><span class="o">.</span><span class="n">bootMode_normal</span><span class="p">)</span>
<span class="n">config</span><span class="o">.</span><span class="n">inactivityTimeout</span><span class="p">(</span><span class="mi">7200</span><span class="p">)</span>
<span class="n">config</span><span class="o">.</span><span class="n">samplingMode</span><span class="p">(</span><span class="n">mscl</span><span class="o">.</span><span class="n">WirelessTypes</span><span class="o">.</span><span class="n">samplingMode_sync</span><span class="p">)</span>
<span class="n">config</span><span class="o">.</span><span class="n">sampleRate</span><span class="p">(</span><span class="n">mscl</span><span class="o">.</span><span class="n">WirelessTypes</span><span class="o">.</span><span class="n">sampleRate_256Hz</span><span class="p">)</span>
<span class="n">config</span><span class="o">.</span><span class="n">unlimitedDuration</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>

<span class="c"># apply the configuration to the Node</span>
<span class="n">node</span><span class="o">.</span><span class="n">applyConfig</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>These are just some examples of the Wireless Node config options available. See the complete API Documentation for the full list of available options.</p>
</blockquote>

<p>To change configuration settings of a Wireless Nodes, use the <code class="prettyprint">WirelessNodeConfig</code> object. This object contains functions for all Wireless Node config options. </p>

<p>When setting an option in the <code class="prettyprint">WirelessNodeConfig</code>, the value is just stored on that object itself. The object must then be given as a parameter in the <code class="prettyprint">node.applyConfig()</code> function to write all of the changed options to the physical Node. In this way, you can apply the same <code class="prettyprint">WirelessNodeConfig</code> object to multiple Nodes if desired.</p>

<p>Some of the configuration options may conflict with other options that are being set, or that are currently set on the Wireless Node. For example, only certain Sample Rates are supported in the Burst Sync Sampling mode. If you only update the <code class="prettyprint">WirelessNodeConfig</code> object&rsquo;s sample rate, this will be checked against the current sampling mode on the Node when applying and will throw an <code class="prettyprint">Error_InvalidNodeConfig</code> exception if it is invalid for that sampling mode. If both the sample rate and sampling mode are set in the <code class="prettyprint">WirelessNodeConfig</code>, they will be checked against each other before applying to the Node.</p>

<p>Not all settings are supported by all Nodes. If the <code class="prettyprint">WirelessNodeConfig</code> has an option set (such as <code class="prettyprint">thermocoupleType()</code>) and that config is applied to a Node that doesn&rsquo;t support that feature (doesn&rsquo;t support thermocouples), it will throw an <code class="prettyprint">Error_InvalidNodeConfig</code> exception.</p>

<p>Use the <code class="prettyprint">NodeFeatures</code> class (<code class="prettyprint">node.features()</code>) to check which features are available for the Wireless Node.</p>

<h2 id="starting-sampling">Starting Sampling</h2>

<p>There are 3 main sampling modes: <strong>Synchronized Sampling</strong>, <strong>Non-Synchronized Sampling</strong>, and <strong>Armed Datalogging</strong>.</p>
<pre><code class="highlight cpp"><span class="c1">//create a SyncSamplingNetwork object, giving it the BaseStation that will be the master BaseStation for the network
</span><span class="n">mscl</span><span class="o">::</span><span class="n">SyncSamplingNetwork</span> <span class="n">network</span><span class="p">(</span><span class="n">baseStation</span><span class="p">);</span>

<span class="c1">//add a WirelessNode to the network.
//Note: The Node must already be configured for Sync Sampling before adding to the network, or else Error_InvalidNodeConfig will be thrown.
</span><span class="n">network</span><span class="p">.</span><span class="n">addNode</span><span class="p">(</span><span class="n">node</span><span class="p">);</span>

<span class="n">network</span><span class="p">.</span><span class="n">ok</span><span class="p">();</span>               <span class="c1">//check if the network status is ok
</span><span class="n">network</span><span class="p">.</span><span class="n">lossless</span><span class="p">(</span><span class="nb">true</span><span class="p">);</span>     <span class="c1">//enable Lossless for the network
</span><span class="n">network</span><span class="p">.</span><span class="n">percentBandwidth</span><span class="p">();</span> <span class="c1">//get the total percent of bandwidth of the network
</span>
<span class="c1">//apply the network configuration to every node in the network
</span><span class="n">network</span><span class="p">.</span><span class="n">applyConfiguration</span><span class="p">();</span>

<span class="c1">//start all the nodes in the network sampling.
</span><span class="n">network</span><span class="p">.</span><span class="n">startSampling</span><span class="p">();</span>
</code></pre>
<pre><code class="highlight csharp"><span class="c1">//create a SyncSamplingNetwork object, giving it the BaseStation that will be the master BaseStation for the network
</span><span class="n">mscl</span><span class="p">.</span><span class="n">SyncSamplingNetwork</span> <span class="n">network</span> <span class="p">=</span> <span class="k">new</span> <span class="n">mscl</span><span class="p">.</span><span class="nf">SyncSamplingNetwork</span><span class="p">(</span><span class="n">baseStation</span><span class="p">);</span>

<span class="c1">//add a WirelessNode to the network.
//Note: The Node must already be configured for Sync Sampling before adding to the network, or else Error_InvalidNodeConfig will be thrown.
</span><span class="n">network</span><span class="p">.</span><span class="nf">addNode</span><span class="p">(</span><span class="n">node</span><span class="p">);</span>

<span class="n">network</span><span class="p">.</span><span class="nf">ok</span><span class="p">();</span>               <span class="c1">//check if the network status is ok
</span><span class="n">network</span><span class="p">.</span><span class="nf">lossless</span><span class="p">(</span><span class="k">true</span><span class="p">);</span>     <span class="c1">//enable Lossless for the network
</span><span class="n">network</span><span class="p">.</span><span class="nf">percentBandwidth</span><span class="p">();</span> <span class="c1">//get the total percent of bandwidth of the network
</span>
<span class="c1">//apply the network configuration to every node in the network
</span><span class="n">network</span><span class="p">.</span><span class="nf">applyConfiguration</span><span class="p">();</span>

<span class="c1">//start all the nodes in the network sampling.
</span><span class="n">network</span><span class="p">.</span><span class="nf">startSampling</span><span class="p">();</span>
</code></pre>
<pre><code class="highlight python"><span class="c"># create a SyncSamplingNetwork object, giving it the BaseStation that will be the master BaseStation for the network</span>
<span class="n">network</span> <span class="o">=</span> <span class="n">mscl</span><span class="o">.</span><span class="n">SyncSamplingNetwork</span><span class="p">(</span><span class="n">baseStation</span><span class="p">)</span>

<span class="c"># add a WirelessNode to the network.</span>
<span class="c"># Note: The Node must already be configured for Sync Sampling before adding to the network, or else Error_InvalidNodeConfig will be thrown.</span>
<span class="n">network</span><span class="o">.</span><span class="n">addNode</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>

<span class="n">network</span><span class="o">.</span><span class="n">ok</span><span class="p">()</span>                <span class="c"># check if the network status is ok</span>
<span class="n">network</span><span class="o">.</span><span class="n">lossless</span><span class="p">(</span><span class="n">true</span><span class="p">)</span>      <span class="c"># enable Lossless for the network</span>
<span class="n">network</span><span class="o">.</span><span class="n">percentBandwidth</span><span class="p">()</span>  <span class="c"># get the total percent of bandwidth of the network</span>

<span class="c"># apply the network configuration to every node in the network</span>
<span class="n">network</span><span class="o">.</span><span class="n">applyConfiguration</span><span class="p">()</span>

<span class="c"># start all the nodes in the network sampling.</span>
<span class="n">network</span><span class="o">.</span><span class="n">startSampling</span><span class="p">()</span>
</code></pre>

<h3 id="synchronized-sampling">Synchronized Sampling</h3>

<p>Synchronized Sampling involves creating a Time Division Multiple Access (TDMA) network with one or more Wireless Nodes tied to a single Base Station. In this mode, all of the Nodes will have a common timestamp that is transmitted with the data, so that data can be accurately aligned.
The BaseStation provides a beacon which keeps the Nodes in the network time-synchronized to +/- 32 microseconds.</p>

<p>To start a Sync Sampling network, create a <code class="prettyprint">SyncSamplingNetwork</code> instance. This takes a <code class="prettyprint">BaseStation</code> as a parameter, which will be the master BaseStation that communicates with all of the Nodes, starts them sampling, and provides the beacon.</p>

<p>After you have configured all of the Nodes, add them to the network using the networks <code class="prettyprint">addNode()</code> function. </p>

<p>Once all of the Nodes have been added to the network, start the network using the network&rsquo;s <code class="prettyprint">startSampling()</code> function.</p>

<aside class="notice">
The <b>startSampling( )</b> function will arm all of the Nodes for sampling and then enable the Beacon on the master Base Station using the system time. if you wish to provide your own start time (not use the system time), pass a <b>Timestamp</b> as a parameter to this function. Note: if you do not want to enable a beacon at this time, use the <b>startSampling_noBeacon()</b> function. In this case, the Nodes will be armed and will start sampling as soon as they hear a beacon.
</aside>
<pre><code class="highlight cpp"><span class="c1">//start the Non-Sync Sampling session.
</span><span class="n">node</span><span class="p">.</span><span class="n">startNonSyncSampling</span><span class="p">();</span>
</code></pre>
<pre><code class="highlight csharp"><span class="c1">//start the Non-Sync Sampling session.
</span><span class="n">node</span><span class="p">.</span><span class="nf">startNonSyncSampling</span><span class="p">();</span>
</code></pre>
<pre><code class="highlight python"><span class="c"># start the Non-Sync Sampling session.</span>
<span class="n">node</span><span class="o">.</span><span class="n">startNonSyncSampling</span><span class="p">()</span>
</code></pre>

<h3 id="non-synchronized-sampling">Non-Synchronized Sampling</h3>

<p>Non-Synchronized Sampling requires no beacon, or network. Instead, each Node is set to sample individually. </p>

<p>Since there is no synchronization, there is a high chance of data loss, as Nodes could send their data at the same time as other Nodes, resulting in a loss of packets. This sampling mode also does not transmit timestamps with the data. Instead, timestamps will be assigned to the data when MSCL receives it.</p>

<p>To start a Non-Sync Sampling network, use the <code class="prettyprint">startNonSyncSampling()</code> function on the <code class="prettyprint">WirelessNode</code> object.</p>
<pre><code class="highlight cpp"><span class="c1">//create a ArmedDataloggingNetwork object, giving it the BaseStation that will be the master BaseStation for the network
</span><span class="n">mscl</span><span class="o">::</span><span class="n">ArmedDataloggingNetwork</span> <span class="n">network</span><span class="p">(</span><span class="n">baseStation</span><span class="p">);</span>

<span class="c1">//add WirelessNode(s) to the network.
//Note: The Node must already be configured for Armed Datalogging before adding to the network, or else Error_InvalidNodeConfig will be thrown.
</span><span class="n">network</span><span class="p">.</span><span class="n">addNode</span><span class="p">(</span><span class="n">node</span><span class="p">);</span>
<span class="n">network</span><span class="p">.</span><span class="n">addNode</span><span class="p">(</span><span class="n">node2</span><span class="p">);</span>

<span class="c1">//start datalogging with all the nodes in the network.
</span><span class="n">network</span><span class="p">.</span><span class="n">startSampling</span><span class="p">();</span>
</code></pre>
<pre><code class="highlight csharp"><span class="c1">//create a ArmedDataloggingNetwork object, giving it the BaseStation that will be the master BaseStation for the network
</span><span class="n">mscl</span><span class="p">.</span><span class="n">SyncSamplingNetwork</span> <span class="n">network</span> <span class="p">=</span> <span class="k">new</span> <span class="n">mscl</span><span class="p">.</span><span class="nf">SyncSamplingNetwork</span><span class="p">(</span><span class="n">baseStation</span><span class="p">);</span>

<span class="c1">//add WirelessNode(s) to the network.
//Note: The Node must already be configured for Armed Datalogging before adding to the network, or else Error_InvalidNodeConfig will be thrown.
</span><span class="n">network</span><span class="p">.</span><span class="nf">addNode</span><span class="p">(</span><span class="n">node</span><span class="p">);</span>
<span class="n">network</span><span class="p">.</span><span class="nf">addNode</span><span class="p">(</span><span class="n">node2</span><span class="p">);</span>

<span class="c1">//start datalogging with all the nodes in the network.
</span><span class="n">network</span><span class="p">.</span><span class="nf">startSampling</span><span class="p">();</span>
</code></pre>
<pre><code class="highlight python"><span class="c"># create a ArmedDataloggingNetwork object, giving it the BaseStation that will be the master BaseStation for the network</span>
<span class="n">network</span> <span class="o">=</span> <span class="n">mscl</span><span class="o">.</span><span class="n">ArmedDataloggingNetwork</span><span class="p">(</span><span class="n">baseStation</span><span class="p">)</span>

<span class="c"># add WirelessNode(s) to the network.</span>
<span class="c"># Note: The Node must already be configured for Armed Datalogging before adding to the network, or else Error_InvalidNodeConfig will be thrown.</span>
<span class="n">network</span><span class="o">.</span><span class="n">addNode</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
<span class="n">network</span><span class="o">.</span><span class="n">addNode</span><span class="p">(</span><span class="n">node2</span><span class="p">)</span>

<span class="c"># start datalogging with all the nodes in the network.</span>
<span class="n">network</span><span class="o">.</span><span class="n">startSampling</span><span class="p">()</span>
</code></pre>

<h3 id="armed-datalogging">Armed Datalogging</h3>

<p>Armed Datalogging involves creating a network with one or more Wireless Nodes and starting all of the Nodes simultaneously.</p>

<p>There is no beacon keeping the nodes aligned, and all data is logged to each Node&rsquo;s internal storage, to be downloaded later.</p>

<h2 id="collecting-data">Collecting Data</h2>
<pre><code class="highlight cpp"><span class="c1">//create the BaseStation, passing in the connection
</span><span class="n">mscl</span><span class="o">::</span><span class="n">BaseStation</span> <span class="n">basestation</span><span class="p">(</span><span class="n">connection</span><span class="p">);</span>

<span class="k">while</span><span class="p">(</span><span class="nb">true</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">//get all the data sweeps that have been collected, with a timeout of 500 milliseconds
</span>    <span class="n">mscl</span><span class="o">::</span><span class="n">DataSweeps</span> <span class="n">sweeps</span> <span class="o">=</span> <span class="n">basestation</span><span class="p">.</span><span class="n">getData</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>

    <span class="k">for</span><span class="p">(</span><span class="n">mscl</span><span class="o">::</span><span class="n">DataSweep</span> <span class="n">sweep</span> <span class="o">:</span> <span class="n">sweeps</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">sweep</span><span class="p">.</span><span class="n">nodeAddress</span><span class="p">();</span>    <span class="c1">//the node address the sweep is from
</span>        <span class="n">sweep</span><span class="p">.</span><span class="n">timestamp</span><span class="p">();</span>      <span class="c1">//the TimeStamp of the sweep
</span>        <span class="n">sweep</span><span class="p">.</span><span class="n">tick</span><span class="p">();</span>           <span class="c1">//the tick of the sweep (0 - 65535 counter)
</span>        <span class="n">sweep</span><span class="p">.</span><span class="n">sampleRate</span><span class="p">();</span>     <span class="c1">//the sample rate of the sweep
</span>        <span class="n">sweep</span><span class="p">.</span><span class="n">samplingType</span><span class="p">();</span>   <span class="c1">//the SamplingType of the sweep (sync, nonsync, burst, etc.)
</span>        <span class="n">sweep</span><span class="p">.</span><span class="n">nodeRssi</span><span class="p">();</span>       <span class="c1">//the signal strength at the Node
</span>        <span class="n">sweep</span><span class="p">.</span><span class="n">baseRssi</span><span class="p">();</span>       <span class="c1">//the signal strength at the BaseStation
</span>        <span class="n">sweep</span><span class="p">.</span><span class="n">frequency</span><span class="p">();</span>      <span class="c1">//the radio frequency this was collected on
</span>
        <span class="c1">//get the vector of data in the sweep
</span>        <span class="n">mscl</span><span class="o">::</span><span class="n">ChannelData</span> <span class="n">data</span> <span class="o">=</span> <span class="n">sweep</span><span class="p">.</span><span class="n">data</span><span class="p">();</span>

        <span class="c1">//iterate over each point in the sweep (one point per channel)
</span>        <span class="k">for</span><span class="p">(</span><span class="n">mscl</span><span class="o">::</span><span class="n">WirelessDataPoint</span> <span class="n">dataPoint</span> <span class="o">:</span> <span class="n">data</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">dataPoint</span><span class="p">.</span><span class="n">channelName</span><span class="p">();</span>    <span class="c1">//the name of the channel for this point
</span>            <span class="n">dataPoint</span><span class="p">.</span><span class="n">storedAs</span><span class="p">();</span>       <span class="c1">//the ValueType that the data is stored as
</span>            <span class="n">dataPoint</span><span class="p">.</span><span class="n">as_float</span><span class="p">();</span>       <span class="c1">//get the value as a float
</span>        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<pre><code class="highlight csharp"><span class="c1">//create the BaseStation, passing in the connection
</span><span class="n">mscl</span><span class="p">.</span><span class="n">BaseStation</span> <span class="n">basestation</span> <span class="p">=</span> <span class="k">new</span> <span class="n">mscl</span><span class="p">.</span><span class="nf">BaseStation</span><span class="p">(</span><span class="n">connection</span><span class="p">);</span>

<span class="k">while</span><span class="p">(</span><span class="k">true</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">//get all the data sweeps that have been collected, with a timeout of 500 milliseconds
</span>    <span class="n">mscl</span><span class="p">.</span><span class="n">DataSweeps</span> <span class="n">sweeps</span> <span class="p">=</span> <span class="n">basestation</span><span class="p">.</span><span class="nf">getData</span><span class="p">(</span><span class="m">500</span><span class="p">);</span>

    <span class="k">foreach</span><span class="p">(</span><span class="n">mscl</span><span class="p">.</span><span class="n">DataSweep</span> <span class="n">sweep</span> <span class="k">in</span> <span class="n">sweeps</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">sweep</span><span class="p">.</span><span class="nf">nodeAddress</span><span class="p">();</span>    <span class="c1">//the node address the sweep is from
</span>        <span class="n">sweep</span><span class="p">.</span><span class="nf">timestamp</span><span class="p">();</span>      <span class="c1">//the TimeStamp of the sweep
</span>        <span class="n">sweep</span><span class="p">.</span><span class="nf">tick</span><span class="p">();</span>           <span class="c1">//the tick of the sweep (0 - 65535 counter)
</span>        <span class="n">sweep</span><span class="p">.</span><span class="nf">sampleRate</span><span class="p">();</span>     <span class="c1">//the sample rate of the sweep
</span>        <span class="n">sweep</span><span class="p">.</span><span class="nf">samplingType</span><span class="p">();</span>   <span class="c1">//the SamplingType of the sweep (sync, nonsync, burst, etc.)
</span>        <span class="n">sweep</span><span class="p">.</span><span class="nf">nodeRssi</span><span class="p">();</span>       <span class="c1">//the signal strength at the Node
</span>        <span class="n">sweep</span><span class="p">.</span><span class="nf">baseRssi</span><span class="p">();</span>       <span class="c1">//the signal strength at the BaseStation
</span>        <span class="n">sweep</span><span class="p">.</span><span class="nf">frequency</span><span class="p">();</span>      <span class="c1">//the radio frequency this was collected on
</span>
        <span class="c1">//get the vector of data in the sweep
</span>        <span class="n">mscl</span><span class="p">.</span><span class="n">ChannelData</span> <span class="n">data</span> <span class="p">=</span> <span class="n">sweep</span><span class="p">.</span><span class="nf">data</span><span class="p">();</span>

        <span class="c1">//iterate over each point in the sweep (one point per channel)
</span>        <span class="k">foreach</span><span class="p">(</span><span class="n">mscl</span><span class="p">.</span><span class="n">WirelessDataPoint</span> <span class="n">dataPoint</span> <span class="k">in</span> <span class="n">data</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">dataPoint</span><span class="p">.</span><span class="nf">channelName</span><span class="p">();</span>    <span class="c1">//the name of the channel for this point
</span>            <span class="n">dataPoint</span><span class="p">.</span><span class="nf">storedAs</span><span class="p">();</span>       <span class="c1">//the ValueType that the data is stored as
</span>            <span class="n">dataPoint</span><span class="p">.</span><span class="nf">as_float</span><span class="p">();</span>       <span class="c1">//get the value as a float
</span>        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<pre><code class="highlight python"><span class="c">#create the BaseStation, passing in the connection</span>
<span class="n">basestation</span> <span class="o">=</span> <span class="n">mscl</span><span class="o">.</span><span class="n">BaseStation</span><span class="p">(</span><span class="n">connection</span><span class="p">)</span>

<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>

    <span class="c"># get all the data sweeps that have been collected, with a timeout of 500 milliseconds</span>
    <span class="n">sweeps</span> <span class="o">=</span> <span class="n">basestation</span><span class="o">.</span><span class="n">getData</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">sweep</span> <span class="ow">in</span> <span class="n">sweeps</span><span class="p">:</span>
        <span class="n">sweep</span><span class="o">.</span><span class="n">nodeAddress</span><span class="p">()</span>    <span class="c"># the node address the sweep is from</span>
        <span class="n">sweep</span><span class="o">.</span><span class="n">timestamp</span><span class="p">()</span>      <span class="c"># the TimeStamp of the sweep</span>
        <span class="n">sweep</span><span class="o">.</span><span class="n">tick</span><span class="p">()</span>           <span class="c"># the tick of the sweep (0 - 65535 counter)</span>
        <span class="n">sweep</span><span class="o">.</span><span class="n">sampleRate</span><span class="p">()</span>     <span class="c"># the sample rate of the sweep</span>
        <span class="n">sweep</span><span class="o">.</span><span class="n">samplingType</span><span class="p">()</span>   <span class="c"># the SamplingType of the sweep (sync, nonsync, burst, etc.)</span>
        <span class="n">sweep</span><span class="o">.</span><span class="n">nodeRssi</span><span class="p">()</span>       <span class="c"># the signal strength at the Node</span>
        <span class="n">sweep</span><span class="o">.</span><span class="n">baseRssi</span><span class="p">()</span>       <span class="c"># the signal strength at the BaseStation</span>
        <span class="n">sweep</span><span class="o">.</span><span class="n">frequency</span><span class="p">()</span>      <span class="c"># the radio frequency this was collected on</span>

        <span class="c"># get the vector of data in the sweep</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">sweep</span><span class="o">.</span><span class="n">data</span><span class="p">()</span>

        <span class="c"># iterate over each point in the sweep (one point per channel)</span>
        <span class="k">for</span> <span class="n">dataPoint</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="n">dataPoint</span><span class="o">.</span><span class="n">channelName</span><span class="p">()</span>    <span class="c"># the name of the channel for this point</span>
            <span class="n">dataPoint</span><span class="o">.</span><span class="n">storedAs</span><span class="p">()</span>       <span class="c"># the ValueType that the data is stored as</span>
            <span class="n">dataPoint</span><span class="o">.</span><span class="n">as_float</span><span class="p">()</span>       <span class="c"># get the value as a float</span>
</code></pre>

<blockquote>
<p><code class="prettyprint">as_float()</code> returns the dataPoint value as a 4-byte float. However there are more options, such as <code class="prettyprint">as_uint16()</code>, <code class="prettyprint">as_double()</code>, <code class="prettyprint">as_string()</code>, etc. The <code class="prettyprint">ValueType</code> that is returned from the <code class="prettyprint">storedAs()</code> function determines how the data is actually stored.</p>
</blockquote>

<p>As soon as the <code class="prettyprint">BaseStation</code> object is created, all incoming packets will be parsed and stored in an internal circular buffer.</p>

<p>So if a Wireless Node is already sampling on the same frequency as your BaseStation, you can simply access and consume the data that is being transmitted.</p>

<p><code class="prettyprint">basestation.getData()</code> will return a vector of <code class="prettyprint">DataSweep</code> objects. This will contain all of the sweeps that have been collected after the <code class="prettyprint">BaseStation</code> object was created.</p>

<p>Each <code class="prettyprint">DataSweep</code> contains various information describing it. The DataSweep&rsquo;s <code class="prettyprint">data()</code> function will return a vector of <code class="prettyprint">WirelessDataPoint</code> objects. This will have one point for each active channel that was enabled on the Node.</p>

<p>Each data point will be stored as a certain type. The datapoint&rsquo;s <code class="prettyprint">storedAs()</code> function will return an enum specifying which type the data is stored in (<code class="prettyprint">valueType_float</code>, <code class="prettyprint">valueType_uint16</code>, etc).</p>

<p>Using this information, you can call one of the datapoint&rsquo;s <code class="prettyprint">as_XXXXX()</code> functions (<code class="prettyprint">as_float()</code>, <code class="prettyprint">as_uint16()</code>, etc) to get the value in the way it was stored.</p>

<aside class="notice">
Most types can be converted between each other. For example, if the data was stored as valueType_uint16 (2-byte unsigned integer), you can still use the as_float() function and the uint16 will be converted to a float and returned.
However, some types such as valueType_Vector cannot be converted to other values and will throw an Error_BadDataType exception if an invalid function is used to retrieve it (using as_float() instead of as_Vector()). 
</aside>

<h1 id="inertial">Inertial</h1>

<h2 id="creating-an-inertialnode">Creating an InertialNode</h2>
<pre><code class="highlight cpp"><span class="cp">#include "mscl/Communication/Connection.h"
#include "mscl/MicroStrain/Inertial/InertialNode.h"
</span>
<span class="c1">//create the connection object with port and baud rate
</span><span class="n">mscl</span><span class="o">::</span><span class="n">Connection</span><span class="o">::</span><span class="n">Serial</span> <span class="n">connection</span><span class="p">(</span><span class="s">"COM3"</span><span class="p">,</span> <span class="mi">921600</span><span class="p">);</span>

<span class="c1">//create the InertialNode, passing in the connection
</span><span class="n">mscl</span><span class="o">::</span><span class="n">InertialNode</span> <span class="n">node</span><span class="p">(</span><span class="n">connection</span><span class="p">);</span>
</code></pre>
<pre><code class="highlight csharp"><span class="c1">//create the connection object with port and baud rate
</span><span class="n">mscl</span><span class="p">.</span><span class="n">Connection</span> <span class="n">connection</span> <span class="p">=</span> <span class="n">mscl</span><span class="p">.</span><span class="n">Connection</span><span class="p">.</span><span class="nf">Serial</span><span class="p">(</span><span class="s">"COM3"</span><span class="p">,</span> <span class="m">921600</span><span class="p">);</span>

<span class="c1">//create the InertialNode, passing in the connection
</span><span class="n">mscl</span><span class="p">.</span><span class="n">InertialNode</span> <span class="n">node</span> <span class="p">=</span> <span class="k">new</span> <span class="n">mscl</span><span class="p">.</span><span class="nf">InertialNode</span><span class="p">(</span><span class="n">connection</span><span class="p">);</span>
</code></pre>
<pre><code class="highlight python"><span class="kn">import</span> <span class="nn">mscl</span>

<span class="c">#create the connection object with port and baud rate</span>
<span class="n">connection</span> <span class="o">=</span> <span class="n">mscl</span><span class="o">.</span><span class="n">Connection</span><span class="o">.</span><span class="n">Serial</span><span class="p">(</span><span class="s">"COM3"</span><span class="p">,</span> <span class="mi">921600</span><span class="p">)</span>

<span class="c">#create the InertialNode, passing in the connection</span>
<span class="n">node</span> <span class="o">=</span> <span class="n">mscl</span><span class="o">.</span><span class="n">InertialNode</span><span class="p">(</span><span class="n">connection</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>Make sure to replace <code class="prettyprint">COM3</code> and <code class="prettyprint">921600</code> with your own port settings.</p>
</blockquote>

<p>To interace with an <a href="http://www.microstrain.com/lord-microstrain-inertial-sensors-all-products">Inertial Node</a>, create an <code class="prettyprint">InertialNode</code> object.</p>

<p>An <code class="prettyprint">InertialNode</code> takes a <code class="prettyprint">Connection</code> as a parameter. </p>

<p><code class="prettyprint">Serial</code>, <code class="prettyprint">TcpIp</code>, and <code class="prettyprint">UnixSocket</code> are all available as connection types.</p>

<aside class="notice">
As soon as the Connection object is created, the port will be opened.
</aside>

<h2 id="communicating-with-a-node">Communicating with a Node</h2>
<pre><code class="highlight cpp"><span class="c1">//ping the Node
</span><span class="n">bool</span> <span class="n">success</span> <span class="o">=</span> <span class="n">node</span><span class="p">.</span><span class="n">ping</span><span class="p">();</span>
</code></pre>
<pre><code class="highlight csharp"><span class="c1">//ping the Node
</span><span class="kt">bool</span> <span class="n">success</span> <span class="p">=</span> <span class="n">node</span><span class="p">.</span><span class="nf">ping</span><span class="p">();</span>
</code></pre>
<pre><code class="highlight python"><span class="c"># ping the Node</span>
<span class="n">success</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">ping</span><span class="p">()</span>
</code></pre>

<p>To test communicating with an Inertial Node, use the <code class="prettyprint">ping()</code> function.
<br><br><br><br><br><br></p>
<pre><code class="highlight cpp"><span class="c1">//put the Inertial Node into its idle state
</span><span class="n">node</span><span class="p">.</span><span class="n">setToIdle</span><span class="p">();</span>
</code></pre>
<pre><code class="highlight csharp"><span class="c1">//put the Inertial Node into its idle state
</span><span class="n">node</span><span class="p">.</span><span class="nf">setToIdle</span><span class="p">();</span>
</code></pre>
<pre><code class="highlight python"><span class="c"># put the Inertial Node into its idle state</span>
<span class="n">node</span><span class="o">.</span><span class="n">setToIdle</span><span class="p">()</span>
</code></pre>

<p>Unlike a Wireless Node, an Inertial Node can be directly communicated with even if it is sampling. However, in most cases, it is still useful to set the Node to an idle state between sampling sessions and when changing configurations. To do this, use the <code class="prettyprint">setToIdle()</code> function.</p>

<h2 id="configuring-a-node">Configuring a Node</h2>
<pre><code class="highlight cpp"><span class="c1">//get all of the active channels for the GPS category on the Node
</span><span class="n">mscl</span><span class="o">::</span><span class="n">InertialChannels</span> <span class="n">activeChs</span> <span class="o">=</span> <span class="n">node</span><span class="p">.</span><span class="n">getActiveChannelFields</span><span class="p">(</span><span class="n">mscl</span><span class="o">::</span><span class="n">InertialTypes</span><span class="o">::</span><span class="n">CATEGORY_GPS</span><span class="p">);</span>
</code></pre>
<pre><code class="highlight csharp"><span class="c1">//get all of the active channels for the GPS category on the Node
</span><span class="n">mscl</span><span class="p">.</span><span class="n">InertialChannels</span> <span class="n">activeChs</span> <span class="p">=</span> <span class="n">node</span><span class="p">.</span><span class="nf">getActiveChannelFields</span><span class="p">(</span><span class="n">mscl</span><span class="p">.</span><span class="n">InertialTypes</span><span class="p">.</span><span class="n">InertialCategory</span><span class="p">.</span><span class="n">CATEGORY_GPS</span><span class="p">);</span>
</code></pre>
<pre><code class="highlight python"><span class="c"># get all of the active channels for the GPS category on the Node</span>
<span class="n">activeChs</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">getActiveChannelFields</span><span class="p">(</span><span class="n">mscl</span><span class="o">.</span><span class="n">InertialTypes</span><span class="o">.</span><span class="n">CATEGORY_GPS</span><span class="p">)</span>
</code></pre>

<p>Each Inertial Node has 1 or more Categories of sensors on the Node:</p>

<table><thead>
<tr>
<th>Category</th>
<th>Code</th>
</tr>
</thead><tbody>
<tr>
<td>Sensor</td>
<td><code class="prettyprint">CATEGORY_SENSOR</code></td>
</tr>
<tr>
<td>GPS</td>
<td><code class="prettyprint">CATEGORY_GPS</code></td>
</tr>
<tr>
<td>Estimation Filter</td>
<td><code class="prettyprint">CATEGORY_ESTFILTER</code></td>
</tr>
</tbody></table>

<p>When getting and setting configuration options, it is sometimes necessary to choose the category to target for the command. This is the case in getting the active channels that are currently enabled on the Node.</p>
<pre><code class="highlight cpp"><span class="c1">//build up the channels to set
</span><span class="n">mscl</span><span class="o">::</span><span class="n">InertialChannels</span> <span class="n">chs</span><span class="p">;</span>

<span class="n">chs</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">mscl</span><span class="o">::</span><span class="n">InertialChannel</span><span class="p">(</span><span class="n">mscl</span><span class="o">::</span><span class="n">InertialTypes</span><span class="o">::</span><span class="n">CH_FIELD_SENSOR_RAW_ACCEL_VEC</span><span class="p">,</span> <span class="n">mscl</span><span class="o">::</span><span class="n">SampleRate</span><span class="o">::</span><span class="n">Hertz</span><span class="p">(</span><span class="mi">500</span><span class="p">)));</span>

<span class="n">chs</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">mscl</span><span class="o">::</span><span class="n">InertialChannel</span><span class="p">(</span><span class="n">mscl</span><span class="o">::</span><span class="n">InertialTypes</span><span class="o">::</span><span class="n">CH_FIELD_SENSOR_RAW_GYRO_VEC</span><span class="p">,</span> <span class="n">mscl</span><span class="o">::</span><span class="n">SampleRate</span><span class="o">::</span><span class="n">Hertz</span><span class="p">(</span><span class="mi">100</span><span class="p">)));</span>

<span class="c1">//set the active channels for the Sensor category on the Node
</span><span class="n">node</span><span class="p">.</span><span class="n">setActiveChannelFields</span><span class="p">(</span><span class="n">mscl</span><span class="o">::</span><span class="n">InertialTypes</span><span class="o">::</span><span class="n">CATEGORY_SENSOR</span><span class="p">,</span> <span class="n">chs</span><span class="p">);</span>


<span class="c1">//get information about the Node
</span><span class="n">mscl</span><span class="o">::</span><span class="n">InertialNodeInfo</span> <span class="n">info</span> <span class="o">=</span> <span class="n">node</span><span class="p">.</span><span class="n">info</span><span class="p">();</span>

<span class="k">if</span><span class="p">(</span><span class="n">info</span><span class="p">.</span><span class="n">supportsCategory</span><span class="p">(</span><span class="n">mscl</span><span class="o">::</span><span class="n">InertialTypes</span><span class="o">::</span><span class="n">CATEGORY_SENSOR</span><span class="p">))</span>
<span class="p">{</span>
    <span class="n">mscl</span><span class="o">::</span><span class="n">InertialTypes</span><span class="o">::</span><span class="n">ChannelFields</span> <span class="n">fields</span> <span class="o">=</span> <span class="n">info</span><span class="p">.</span><span class="n">supportedChannelFields</span><span class="p">(</span><span class="n">mscl</span><span class="o">::</span><span class="n">InertialTypes</span><span class="o">::</span><span class="n">CATEGORY_SENSOR</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>
<pre><code class="highlight csharp"><span class="c1">//build up the channels to set
</span><span class="n">mscl</span><span class="p">::</span><span class="n">InertialChannels</span> <span class="n">chs</span> <span class="p">=</span> <span class="k">new</span> <span class="n">mscl</span><span class="p">.</span><span class="nf">InertialChannels</span><span class="p">();</span>

<span class="n">chs</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="k">new</span> <span class="n">mscl</span><span class="p">.</span><span class="nf">InertialChannel</span><span class="p">(</span><span class="n">mscl</span><span class="p">.</span><span class="n">InertialTypes</span><span class="p">.</span><span class="n">ChannelField</span><span class="p">.</span><span class="n">CH_FIELD_SENSOR_RAW_ACCEL_VEC</span><span class="p">,</span> <span class="n">mscl</span><span class="p">.</span><span class="n">SampleRate</span><span class="p">.</span><span class="nf">Hertz</span><span class="p">(</span><span class="m">500</span><span class="p">)));</span>

<span class="n">chs</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="k">new</span> <span class="n">mscl</span><span class="p">.</span><span class="nf">InertialChannel</span><span class="p">(</span><span class="n">mscl</span><span class="p">.</span><span class="n">InertialTypes</span><span class="p">.</span><span class="n">ChannelField</span><span class="p">.</span><span class="n">CH_FIELD_SENSOR_RAW_GYRO_VEC</span><span class="p">,</span> <span class="n">mscl</span><span class="p">.</span><span class="n">SampleRate</span><span class="p">.</span><span class="nf">Hertz</span><span class="p">(</span><span class="m">100</span><span class="p">)));</span>

<span class="c1">//set the active channels for the Sensor category on the Node
</span><span class="n">node</span><span class="p">.</span><span class="nf">setActiveChannelFields</span><span class="p">(</span><span class="n">mscl</span><span class="p">.</span><span class="n">InertialTypes</span><span class="p">.</span><span class="n">InertialCategory</span><span class="p">.</span><span class="n">CATEGORY_SENSOR</span><span class="p">,</span> <span class="n">chs</span><span class="p">);</span>


<span class="c1">//get information about the Node
</span><span class="n">mscl</span><span class="p">.</span><span class="n">InertialNodeInfo</span> <span class="n">info</span> <span class="p">=</span> <span class="n">node</span><span class="p">.</span><span class="nf">info</span><span class="p">();</span>

<span class="k">if</span><span class="p">(</span><span class="n">info</span><span class="p">.</span><span class="nf">supportsCategory</span><span class="p">(</span><span class="n">mscl</span><span class="p">.</span><span class="n">InertialTypes</span><span class="p">.</span><span class="n">InertialCategory</span><span class="p">.</span><span class="n">CATEGORY_SENSOR</span><span class="p">))</span>
<span class="p">{</span>
    <span class="n">mscl</span><span class="p">.</span><span class="n">InertialTypes</span><span class="p">.</span><span class="n">ChannelFields</span> <span class="n">fields</span> <span class="p">=</span> <span class="n">info</span><span class="p">.</span><span class="nf">supportedChannelFields</span><span class="p">(</span><span class="n">mscl</span><span class="p">.</span><span class="n">InertialTypes</span><span class="p">.</span><span class="n">InertialCategory</span><span class="p">.</span><span class="n">CATEGORY_SENSOR</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>
<pre><code class="highlight python"><span class="c"># build up the channels to set</span>
<span class="n">chs</span> <span class="o">=</span> <span class="n">mscl</span><span class="o">.</span><span class="n">InertialChannels</span><span class="p">()</span>

<span class="n">chs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mscl</span><span class="o">.</span><span class="n">InertialChannel</span><span class="p">(</span><span class="n">mscl</span><span class="o">.</span><span class="n">InertialTypes</span><span class="o">.</span><span class="n">CH_FIELD_SENSOR_RAW_ACCEL_VEC</span><span class="p">,</span> <span class="n">mscl</span><span class="o">.</span><span class="n">SampleRate</span><span class="o">.</span><span class="n">Hertz</span><span class="p">(</span><span class="mi">500</span><span class="p">)))</span>

<span class="n">chs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mscl</span><span class="o">.</span><span class="n">InertialChannel</span><span class="p">(</span><span class="n">mscl</span><span class="o">.</span><span class="n">InertialTypes</span><span class="o">.</span><span class="n">CH_FIELD_SENSOR_RAW_GYRO_VEC</span><span class="p">,</span> <span class="n">mscl</span><span class="o">.</span><span class="n">SampleRate</span><span class="o">.</span><span class="n">Hertz</span><span class="p">(</span><span class="mi">100</span><span class="p">)))</span>

<span class="c"># set the active channels for the Sensor category on the Node</span>
<span class="n">node</span><span class="o">.</span><span class="n">setActiveChannelFields</span><span class="p">(</span><span class="n">mscl</span><span class="o">.</span><span class="n">InertialTypes</span><span class="o">.</span><span class="n">CATEGORY_SENSOR</span><span class="p">,</span> <span class="n">chs</span><span class="p">)</span>


<span class="c"># get information about the Node</span>
<span class="n">info</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">info</span><span class="p">();</span>

<span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">supportsCategory</span><span class="p">(</span><span class="n">mscl</span><span class="o">.</span><span class="n">InertialTypes</span><span class="o">.</span><span class="n">CATEGORY_SENSOR</span><span class="p">):</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">supportedChannelFields</span><span class="p">(</span><span class="n">mscl</span><span class="o">.</span><span class="n">InertialTypes</span><span class="o">.</span><span class="n">CATEGORY_SENSOR</span><span class="p">)</span>
</code></pre>

<p>Setting the active channels involves building an <code class="prettyprint">InertialChannels</code> container, and then passing that to the <code class="prettyprint">setActiveChannelFields</code> function for a specific category.</p>

<p>Not all categories and channel fields are supported by each Inertial Node. Use the <code class="prettyprint">node.info()</code> function to get this information on the Node.</p>

<h2 id="starting-sampling">Starting Sampling</h2>
<pre><code class="highlight cpp"><span class="c1">//start sampling on the Sensor category of the Node
</span><span class="n">node</span><span class="p">.</span><span class="n">enableDataStream</span><span class="p">(</span><span class="n">mscl</span><span class="o">::</span><span class="n">InertialTypes</span><span class="o">::</span><span class="n">CATEGORY_SENSOR</span><span class="p">);</span>

<span class="c1">//start sampling on the GPS category of the Node
</span><span class="n">node</span><span class="p">.</span><span class="n">enableDataStream</span><span class="p">(</span><span class="n">mscl</span><span class="o">::</span><span class="n">InertialTypes</span><span class="o">::</span><span class="n">CATEGORY_GPS</span><span class="p">);</span>
</code></pre>
<pre><code class="highlight csharp"><span class="c1">//start sampling on the Sensor category of the Node
</span><span class="n">node</span><span class="p">.</span><span class="nf">enableDataStream</span><span class="p">(</span><span class="n">mscl</span><span class="p">.</span><span class="n">InertialTypes</span><span class="p">.</span><span class="n">InertialCategory</span><span class="p">.</span><span class="n">CATEGORY_SENSOR</span><span class="p">);</span>

<span class="c1">//start sampling on the GPS category of the Node
</span><span class="n">node</span><span class="p">.</span><span class="nf">enableDataStream</span><span class="p">(</span><span class="n">mscl</span><span class="p">.</span><span class="n">InertialTypes</span><span class="p">.</span><span class="n">InertialCategory</span><span class="p">.</span><span class="n">CATEGORY_GPS</span><span class="p">);</span>
</code></pre>
<pre><code class="highlight python"><span class="c"># start sampling on the Sensor category of the Node</span>
<span class="n">node</span><span class="o">.</span><span class="n">enableDataStream</span><span class="p">(</span><span class="n">mscl</span><span class="o">.</span><span class="n">InertialTypes</span><span class="o">.</span><span class="n">CATEGORY_SENSOR</span><span class="p">)</span>

<span class="c"># start sampling on the GPS category of the Node</span>
<span class="n">node</span><span class="o">.</span><span class="n">enableDataStream</span><span class="p">(</span><span class="n">mscl</span><span class="o">.</span><span class="n">InertialTypes</span><span class="o">.</span><span class="n">CATEGORY_GPS</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>You can provide an optional 2nd parameter to the <code class="prettyprint">enableDataStream</code> function which is a boolean that allows enabling (true, default), or disabling (false) of the data stream.</p>
</blockquote>

<p>There are a couple ways to start sampling on an Inertial Node. The first is the <code class="prettyprint">enableDataStream</code> command. This allows you to start sampling on individual categories of the Node.</p>

<p><br><br><br><br><br><br><br><br><br><br></p>
<pre><code class="highlight cpp"><span class="c1">//use the resume command to return to the mode before setToIdle
</span><span class="n">node</span><span class="p">.</span><span class="n">resume</span><span class="p">();</span>
</code></pre>
<pre><code class="highlight csharp"><span class="c1">//use the resume command to return to the mode before setToIdle
</span><span class="n">node</span><span class="p">.</span><span class="nf">resume</span><span class="p">();</span>
</code></pre>
<pre><code class="highlight python"><span class="c"># use the resume command to return to the mode before setToIdle</span>
<span class="n">node</span><span class="o">.</span><span class="n">resume</span><span class="p">()</span>
</code></pre>

<p>Alternatively, you can use the <code class="prettyprint">resume()</code> command. This command places the Node back into the mode it was in before issuing the <code class="prettyprint">setToIdle()</code> command. So if the Node was previously sampling on all of its categories, then <code class="prettyprint">setToIdle()</code> was called, calling <code class="prettyprint">resume()</code> will start the Node sampling again.</p>

<h2 id="collecting-data">Collecting Data</h2>
<pre><code class="highlight cpp"><span class="c1">//create the InertialNode, passing in the connection
</span><span class="n">mscl</span><span class="o">::</span><span class="n">InertialNode</span> <span class="n">node</span> <span class="o">=</span> <span class="n">mscl</span><span class="p">.</span><span class="n">InertialNode</span><span class="p">(</span><span class="n">connection</span><span class="p">);</span>

<span class="k">while</span><span class="p">(</span><span class="nb">true</span><span class="p">)</span>
<span class="p">{</span>
        <span class="c1">//get all the packets that have been collected, with a timeout of 500 milliseconds
</span>        <span class="n">mscl</span><span class="o">::</span><span class="n">InertialDataPackets</span> <span class="n">packets</span> <span class="o">=</span> <span class="n">node</span><span class="p">.</span><span class="n">getDataPackets</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>

        <span class="k">for</span><span class="p">(</span><span class="n">mscl</span><span class="o">::</span><span class="n">InertialDataPacket</span> <span class="n">packet</span> <span class="o">:</span> <span class="n">packets</span><span class="p">)</span>
        <span class="p">{</span>
                <span class="n">packet</span><span class="p">.</span><span class="n">descriptorSet</span><span class="p">();</span> <span class="c1">//the descriptor set of the packet
</span>                <span class="n">packet</span><span class="p">.</span><span class="n">timestamp</span><span class="p">();</span>     <span class="c1">//the PC time when this packet was received
</span>
                <span class="c1">//get all of the points in the packet
</span>                <span class="n">mscl</span><span class="o">::</span><span class="n">InertialDataPoints</span> <span class="n">points</span> <span class="o">=</span> <span class="n">packet</span><span class="p">.</span><span class="n">data</span><span class="p">();</span>

                <span class="k">for</span><span class="p">(</span><span class="n">mscl</span><span class="o">::</span><span class="n">InertialDataPoint</span> <span class="n">dataPoint</span> <span class="o">:</span> <span class="n">points</span><span class="p">)</span>
                <span class="p">{</span>
                        <span class="n">dataPoint</span><span class="p">.</span><span class="n">channelName</span><span class="p">();</span>  <span class="c1">//the name of the channel for this point
</span>                        <span class="n">dataPoint</span><span class="p">.</span><span class="n">storedAs</span><span class="p">();</span>     <span class="c1">//the ValueType that the data is stored as
</span>                        <span class="n">dataPoint</span><span class="p">.</span><span class="n">as_float</span><span class="p">();</span>     <span class="c1">//get the value as a float
</span>                <span class="p">}</span>
        <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<pre><code class="highlight csharp"><span class="c1">//create the InertialNode, passing in the connection
</span><span class="n">mscl</span><span class="p">.</span><span class="n">InertialNode</span> <span class="n">node</span> <span class="p">=</span> <span class="k">new</span> <span class="n">mscl</span><span class="p">.</span><span class="nf">InertialNode</span><span class="p">(</span><span class="n">connection</span><span class="p">);</span>

<span class="k">while</span><span class="p">(</span><span class="k">true</span><span class="p">)</span>
<span class="p">{</span>
        <span class="c1">//get all the packets that have been collected, with a timeout of 500 milliseconds
</span>        <span class="n">mscl</span><span class="p">.</span><span class="n">InertialDataPackets</span> <span class="n">packets</span> <span class="p">=</span> <span class="n">node</span><span class="p">.</span><span class="nf">getDataPackets</span><span class="p">(</span><span class="m">500</span><span class="p">);</span>

        <span class="k">foreach</span><span class="p">(</span><span class="n">mscl</span><span class="p">.</span><span class="n">InertialDataPacket</span> <span class="n">packet</span> <span class="k">in</span> <span class="n">packets</span><span class="p">)</span>
        <span class="p">{</span>
                <span class="n">packet</span><span class="p">.</span><span class="nf">descriptorSet</span><span class="p">();</span>  <span class="c1">//the descriptor set of the packet
</span>                <span class="n">packet</span><span class="p">.</span><span class="nf">timestamp</span><span class="p">();</span>      <span class="c1">//the PC time when this packet was received
</span>
                <span class="c1">//get all of the points in the packet
</span>                <span class="n">mscl</span><span class="p">.</span><span class="n">InertialDataPoints</span> <span class="n">points</span> <span class="p">=</span> <span class="n">packet</span><span class="p">.</span><span class="nf">data</span><span class="p">();</span>

                <span class="k">foreach</span><span class="p">(</span><span class="n">mscl</span><span class="p">.</span><span class="n">InertialDataPoint</span> <span class="n">dataPoint</span> <span class="k">in</span> <span class="n">points</span><span class="p">)</span>
                <span class="p">{</span>
                        <span class="n">dataPoint</span><span class="p">.</span><span class="nf">channelName</span><span class="p">();</span>  <span class="c1">//the name of the channel for this point
</span>                        <span class="n">dataPoint</span><span class="p">.</span><span class="nf">storedAs</span><span class="p">();</span>     <span class="c1">//the ValueType that the data is stored as
</span>                        <span class="n">dataPoint</span><span class="p">.</span><span class="nf">as_float</span><span class="p">();</span>     <span class="c1">//get the value as a float
</span>                <span class="p">}</span>
        <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<pre><code class="highlight python"><span class="c"># create the InertialNode, passing in the connection</span>
<span class="n">node</span> <span class="o">=</span> <span class="n">mscl</span><span class="o">.</span><span class="n">InertialNode</span><span class="p">(</span><span class="n">connection</span><span class="p">)</span>

<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>

        <span class="c"># get all the packets that have been collected, with a timeout of 500 milliseconds</span>
        <span class="n">packets</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">getDataPackets</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">packet</span> <span class="ow">in</span> <span class="n">packets</span><span class="p">:</span>
                <span class="n">packet</span><span class="o">.</span><span class="n">descriptorSet</span><span class="p">()</span>  <span class="c"># the descriptor set of the packet</span>
                <span class="n">packet</span><span class="o">.</span><span class="n">timestamp</span><span class="p">()</span>      <span class="c"># the PC time when this packet was received</span>

                <span class="c"># get all of the points in the packet</span>
                <span class="n">points</span> <span class="o">=</span> <span class="n">packet</span><span class="o">.</span><span class="n">data</span><span class="p">()</span>

                <span class="k">for</span> <span class="n">dataPoint</span> <span class="ow">in</span> <span class="n">points</span><span class="p">:</span>
                        <span class="n">dataPoint</span><span class="o">.</span><span class="n">channelName</span><span class="p">()</span>   <span class="c"># the name of the channel for this point</span>
                        <span class="n">dataPoint</span><span class="o">.</span><span class="n">storedAs</span><span class="p">()</span>      <span class="c"># the ValueType that the data is stored as</span>
                        <span class="n">dataPoint</span><span class="o">.</span><span class="n">as_float</span><span class="p">()</span>      <span class="c"># get the value as a float</span>
        <span class="p">}</span>
</code></pre>

<blockquote>
<p><code class="prettyprint">as_float()</code> returns the dataPoint value as a 4-byte float. However there are more options, such as <code class="prettyprint">as_uint16()</code>, <code class="prettyprint">as_double()</code>, <code class="prettyprint">as_string()</code>, etc. The <code class="prettyprint">ValueType</code> that is returned from the <code class="prettyprint">storedAs()</code> function determines how the data is actually stored.</p>
</blockquote>

<p>As soon as the <code class="prettyprint">InertialNode</code> object is created, all data packets will be parsed and stored in an internal circular buffer.</p>

<p><code class="prettyprint">node.getDataPackets()</code> will return a vector of <code class="prettyprint">InertialDataPacket</code> objects. This will contain all of the packets that have been collected after the <code class="prettyprint">InertialNode</code> object was created.</p>

<p>Each <code class="prettyprint">InertialDataPacket</code> contains various information describing it. The InertialDataPacket&rsquo;s <code class="prettyprint">data()</code> function will return a vector of <code class="prettyprint">InertialDataPoint</code> objects. These data points represent data from the active channels that were sampling on the Node.</p>

<p>Each data point will be stored as a certain type. The datapoint&rsquo;s <code class="prettyprint">storedAs()</code> function will return an enum specifying which type the data is stored in (<code class="prettyprint">valueType_float</code>, <code class="prettyprint">valueType_uint16</code>, etc).</p>

<p>Using this information, you can call one of the data point&rsquo;s <code class="prettyprint">as_XXXXX()</code> functions (<code class="prettyprint">as_float()</code>, <code class="prettyprint">as_uint16()</code>, etc) to get the value in the was it was stored.</p>

<aside class="notice">
Most types can be converted between each other. For example, if the data was stored as valueType_uint16 (2-byte unsigned integer), you can still use the as_float() function and the uint16 will be converted to a float and returned.
However, some types such as valueType_Vector cannot be converted to other values and will throw an Error_BadDataType exception if an invalid function is used to retrieve it (using as_float() instead of as_Vector()). 
</aside>

          <h1 id="exceptions">Exceptions</h1>

<p>MSCL uses the following Exceptions. Check the full documentation for details of which exceptions are thrown by each function.</p>

<table><thead>
<tr>
<th>Exception</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Error</td>
<td>An error has occurred.</td>
</tr>
<tr>
<td>Error_NotSupported</td>
<td>A command or feature was used that is not supported.</td>
</tr>
<tr>
<td>Error_NoData</td>
<td>There is no data available.</td>
</tr>
<tr>
<td>Error_BadDataType</td>
<td>A value was accessed as a type that it cannot be converted to.</td>
</tr>
<tr>
<td>Error_UnknownSampleRate</td>
<td>The sample rate is unknown or invalid.</td>
</tr>
<tr>
<td>Error_Timeout</td>
<td>A read/write timeout has occurred.</td>
</tr>
<tr>
<td>Error_InvalidResponse</td>
<td>An invalid response was received for a command.</td>
</tr>
<tr>
<td>Error_InvalidChecksum</td>
<td>An invalid checksum was received.</td>
</tr>
<tr>
<td>Error_Communication</td>
<td>Failed to communicate with a device.</td>
</tr>
<tr>
<td>Error_NodeCommunication</td>
<td>Failed to communicate with a Wireless Node.</td>
</tr>
<tr>
<td>Error_Connection</td>
<td>An error has occurred with the connection.</td>
</tr>
<tr>
<td>Error_InvalidSerialPort</td>
<td>An error has occurred with the COM port.</td>
</tr>
<tr>
<td>Error_InvalidTcpServer</td>
<td>An error has occured with the TCP/IP port.</td>
</tr>
<tr>
<td>Error_InvalidUnixSocket</td>
<td>An error has occurred with the Unix Socket.</td>
</tr>
<tr>
<td>Error_InertialCmdFailed</td>
<td>The Inertial Command has failed.</td>
</tr>
<tr>
<td>Error_InvalidConfig</td>
<td>The configuration is invalid.</td>
</tr>
<tr>
<td>Error_InvalidNodeConfig</td>
<td>The configuration for a WirelessNode is invalid.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="cpp">C++</a>
                <a href="#" data-language-name="csharp">C#</a>
                <a href="#" data-language-name="python">Python</a>
          </div>
      </div>
    </div>
  </body>
</html>
